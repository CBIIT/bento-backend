---
- name: Add/Remove alb rules
  hosts: docker-local
  connection: local
  gather_facts: yes
    
  tasks:
    - name: get alb info
      include_role:
        name: alb-ops
        tasks_from: info
      when: action == "create"
    - name: get alb info
      include_role:
        name: alb-ops
        tasks_from: rules
      loop:
        - fixed
        - frontend
        - backend
      when: action == "create"

    - name: remove alb rule
      include_role:
        name: alb-ops
        tasks_from: remove
      when: action == "remove"
