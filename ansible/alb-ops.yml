---
- name: Add/Remove alb rules
  hosts: docker-local
  connection: local
  gather_facts: yes
    
  tasks:
    - name: get alb info
      include_role:
        name: alb-ops
        tasks_from: info
      when: action == "create"
    
    - name: get alb info
      include_role:
        name: alb-ops
        tasks_from: rules
      loop:
        - name: fixed
          priority: 1
        - name: frontend
          priority: 3
        - name: backend
          priority: 2
      when: action == "create"

    # - name: remove alb rule
    #   include_role:
    #     name: alb-ops
    #     tasks_from: remove
    #   when: action == "remove"
