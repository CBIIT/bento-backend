---

- name: gather info about alb
  elb_application_lb_info:
    names: 
      - DEV-A-Appli-Caninedata-8UHLKJYN
    region: "{{region}}"
  register: alb_info


- name: set facts
  set_fact:
    # alb_subnets: "{{ alb_info.load_balancers[0].availability_zones| json_query('[*].subnet_id')}}"
    # alb_sg: "{{ alb_info.load_balancers[0].security_groups |list}}"
    # alb_name: "{{ alb_info.load_balancers[0].load_balancer_name }}"
    # certificate_arn: "{{alb_info.load_balancers[0].listeners[0].certificates[0].certificate_arn}}"
    listener_arn: "{{alb_info.load_balancers[0].listeners[0].listener_arn}}"



- debug:
    msg: >
      "{{listener_arn}}"
