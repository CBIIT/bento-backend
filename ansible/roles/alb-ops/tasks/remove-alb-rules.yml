---
- elb_target_group_info:
    names:
      - bento-{{tier}}-backend
  register: backend_tg

- elb_target_group_facts:
    names:
      - bento-{{tier}}-frontend
  register: frontend_tg


- debug:
    msg: >
     "{{frontend_tg}}"
     "{{backend_tg}}"

- name: gather info about alb
  elb_application_lb_info:
    names: 
      - bento-alb-{{tier}}
    region: "{{region}}"

  register: alb_info

- debug:
    msg: >
     "{{alb_info.load_balancers[0].listeners}}"
- name: set facts
  set_fact:
    subnets:
      - id: "{{ alb_info.load_balancers[0].availability_zones[0].subnet_id }}"
        zone: "{{ alb_info.load_balancers[0].availability_zones[0].zone_name }}"
        
        
    alb_sg: "{{ alb_info.load_balancers[0].security_groups[0] }}"


# - debug:
#     msg: >
#      "{{ subnets}}"
#      "{{alb_sg}}"