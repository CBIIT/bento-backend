
- name: Check if tmp directory exist
  stat:
    path: "{{workspace}}/tmp"
  register: stat_result

- name: remove the tmp if exists
  file:
    path: "{{workspace}}/tmp"
    state: absent
  when: stat_result.stat.exists == True

- name: create dict from arms_id and phps_id
  set_fact:
    match_Ids: "{{ dict(arm_Id.split(',') | zip(phs_Id.split(','))) }}"

- name: copy config.json.j2 config.json
  template:
    remote_src: yes
    src: "{{workspace}}/config/config.json.j2"
    dest: "{{workspace}}/config/config.json"

- name: show file content
  debug: 
    msg: "{{lookup('file',{{workspace}}/config/config.json)}}"

# - name: execute file loader script
#   shell:
#     cmd: >
#       /usr/bin/python3
#       matchMain.py
#       {{workspace}}/config/config.json
#     chdir: "{{workspace}}"
#   register: file_loader
#   when: wipe_db == "no"

# - name: show dataloader output
#   debug:
#     msg: "{{data_loader}}"

