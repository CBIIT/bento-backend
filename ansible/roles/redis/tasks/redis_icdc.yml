---
# tasks file for redis
- name: confirm redis redis_host
  debug: 
    msg: "{{ redis_host_icdc[tier] }}"

- name: copy redis script to remote instance
  template:
    src: flush_redis.sh.j2
    dest: flush_redis.sh
    mode: 0777

- name: flush redis cache
  command: sh flush_redis.sh
  #shell: echo -e "get abc \nping" | redis-cli -h {{ redis_host_icdc[tier] }} -p {{ redis_port }} -c
  #shell: echo -e "get abc \nping" | redis-cli -h {{ redis_host_icdc[tier] }} -p {{ redis_port }} -c
  #shell: echo -e ping | redis-cli -h ncias-d2224-c.nci.nih.gov -p {{ redis_port }} -c
  #command: redis-cli -h {{ redis_host_icdc[tier] }} -p {{ redis_port }} -c FLUSHALL
  #redis:
  #  command: flush
  #  flush_mode: all
  #  login_host: "{{ redis_host_icdc[tier] }}"
  #  login_port: "{{ redis_port }}"
  debugger: always
